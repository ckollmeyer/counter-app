<!DOCTYPE html>
<html>
<head>
  <title>Ice Dream Weights</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background-color: #f0f4f8;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 50px;
      color: #1a73e8;
      margin-bottom: 10px;
    }

    h2 {
      font-size: 30px;
      color: #333;
      margin: 20px 0 15px 0;
    }

    .button-row {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 35px;
      width: 100%;
      max-width: 550px;
    }

    .btn {
      font-size: 24px;
      padding: 30px 20px;
      flex: 1;
      min-width: 160px;
      max-width: 220px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      color: white;
      white-space: nowrap;
      text-align: center;
    }

    .btn:hover { transform: scale(1.05); }

    .under { background-color: #ff9999; }
    .within { background-color: #99ccff; min-width: 200px; max-width: 220px; }
    .over { background-color: #99ff99; }

    #undoBtn, #uploadBtn {
      font-size: 28px;
      padding: 20px 20px;
      border-radius: 15px;
      border: none;
      cursor: pointer;
      width: 440px; /* width = blue + green combined */
      display: block;
      margin: 0 auto 15px auto;
      text-align: center;
      color: white;
    }

    #undoBtn { background-color: #ff6f61; margin-bottom: 15px; }
    #uploadBtn { background-color: #1a73e8; margin-bottom: 30px; }

    #undoBtn:hover, #uploadBtn:hover { transform: scale(1.05); }

  </style>
</head>
<body>

<h1>Ice Dream Weights</h1>

<h2>Cup 4.3 oz</h2>
<div class="button-row">
  <button class="btn under" id="cupUnderBtn" onclick="inc('cupUnder')">Under (0)</button>
  <button class="btn within" id="cupWithinBtn" onclick="inc('cupWithin')">Within ±0.5 (0)</button>
  <button class="btn over" id="cupOverBtn" onclick="inc('cupOver')">Over (0)</button>
</div>

<h2>Cone 4.5 oz</h2>
<div class="button-row">
  <button class="btn under" id="coneUnderBtn" onclick="inc('coneUnder')">Under (0)</button>
  <button class="btn within" id="coneWithinBtn" onclick="inc('coneWithin')">Within ±0.5 (0)</button>
  <button class="btn over" id="coneOverBtn" onclick="inc('coneOver')">Over (0)</button>
</div>

<button id="undoBtn" onclick="undo()">Undo</button>
<button id="uploadBtn" onclick="upload()">Upload to Google Form</button>

<script>
  // Counters
  let cupUnder=0, cupWithin=0, cupOver=0, coneUnder=0, coneWithin=0, coneOver=0;
  let actionHistory=[];

  function inc(which){
    actionHistory.push(which);
    switch(which){
      case 'cupUnder': cupUnder++; break;
      case 'cupWithin': cupWithin++; break;
      case 'cupOver': cupOver++; break;
      case 'coneUnder': coneUnder++; break;
      case 'coneWithin': coneWithin++; break;
      case 'coneOver': coneOver++; break;
    }
    updateButton(which);
  }

  function updateButton(which){
    switch(which){
      case 'cupUnder': document.getElementById('cupUnderBtn').innerText=`Under (${cupUnder})`; break;
      case 'cupWithin': document.getElementById('cupWithinBtn').innerText=`Within ±0.5 (${cupWithin})`; break;
      case 'cupOver': document.getElementById('cupOverBtn').innerText=`Over (${cupOver})`; break;
      case 'coneUnder': document.getElementById('coneUnderBtn').innerText=`Under (${coneUnder})`; break;
      case 'coneWithin': document.getElementById('coneWithinBtn').innerText=`Within ±0.5 (${coneWithin})`; break;
      case 'coneOver': document.getElementById('coneOverBtn').innerText=`Over (${coneOver})`; break;
    }
  }

  function undo(){
    if(actionHistory.length===0) return;
    const last=actionHistory.pop();
    switch(last){
      case 'cupUnder': if(cupUnder>0) cupUnder--; break;
      case 'cupWithin': if(cupWithin>0) cupWithin--; break;
      case 'cupOver': if(cupOver>0) cupOver--; break;
      case 'coneUnder': if(coneUnder>0) coneUnder--; break;
      case 'coneWithin': if(coneWithin>0) coneWithin--; break;
      case 'coneOver': if(coneOver>0) coneOver--; break;
    }
    updateButton(last);
  }

  function upload(){
    // Replace with your Google Form pre-filled URL IDs
    const formUrl="https://docs.google.com/forms/d/e/1FAIpQLSfd4DmpsOQr-1N9411Ya9a49G2BAWdZuEAD8pVjo0RvN_aLww/formResponse";
    const data=new URLSearchParams();

    data.append("entry.900320374", cupUnder);   // Cup Under
    data.append("entry.677037870", cupWithin);  // Cup Within
    data.append("entry.592558042", cupOver);    // Cup Over
    data.append("entry.3134040", coneUnder);  // Cone Under
    data.append("entry.36772903", coneWithin); // Cone Within
    data.append("entry.989635515", coneOver);   // Cone Over

    fetch(formUrl, { method:"POST", mode:"no-cors", body:data })
      .then(()=>{ alert("Uploaded to Google Form!"); resetCounters(); })
      .catch(err=>alert("Upload failed: "+err));
  }

  function resetCounters(){
    cupUnder=0; cupWithin=0; cupOver=0;
    coneUnder=0; coneWithin=0; coneOver=0;
    actionHistory=[];
    ['cupUnder','cupWithin','cupOver','coneUnder','coneWithin','coneOver'].forEach(updateButton);
  }
</script>

</body>
</html>
